<main id="add-inpatient">
  <div class="container-fluid">
    <form [formGroup]="patientForm" class="form p-2" (ngSubmit)="onSubmit()">
      <p-toast position="top-left"></p-toast>
      <h4 class="mb-4">๐คุจูุงูุงุช ุงููุฑูุถ</h4>
      <div class="row mb-3">
        <div class="col-lg-4">
          <label for="patientName" class="form-label">ุงุณู ุงููุฑูุถ</label>
          <input type="text" id="patientName" class="form-control shadow-none" formControlName="patientName" />
          <div *ngIf="patientForm.get('patientName')?.invalid && patientForm.get('patientName')?.touched" class="text-danger">
            ุงุณู ุงููุฑูุถ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="patientNationalId" class="form-label">ุฑูู ุจุทุงูุฉ ุงููุฑูุถ</label>
          <input type="text" id="patientNationalId" class="form-control shadow-none" formControlName="patientNationalId" />
          <div *ngIf="patientForm.get('patientNationalId')?.invalid && patientForm.get('patientNationalId')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('patientNationalId')?.errors?.['required']">ุฑูู ุงูุจุทุงูุฉ ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('patientNationalId')?.errors?.['pattern']">ุฑูู ุงูุจุทุงูุฉ ูุฌุจ ุฃู ูููู 14 ุฑูููุง</ng-container>
          </div>
        </div>
        <div class="col-lg-4">
          <label for="patientBirthDate" class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
          <input type="date" id="patientBirthDate" class="form-control shadow-none" formControlName="patientBirthDate" />
          <div *ngIf="patientForm.get('patientBirthDate')?.invalid && patientForm.get('patientBirthDate')?.touched" class="text-danger">
            ุชุงุฑูุฎ ุงููููุงุฏ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="patientPhone" class="form-label">ุฑูู ุงููุงุชู</label>
          <input type="text" id="patientPhone" class="form-control shadow-none" formControlName="patientPhone" />
          <div *ngIf="patientForm.get('patientPhone')?.invalid && patientForm.get('patientPhone')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('patientPhone')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('patientPhone')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
          </div>
        </div>
        <div class="col-lg-4">
          <label for="patientAddress" class="form-label">ูุญู ุงูุฅูุงูุฉ</label>
          <input type="text" id="patientAddress" class="form-control shadow-none" formControlName="patientAddress" />
          <div *ngIf="patientForm.get('patientAddress')?.invalid && patientForm.get('patientAddress')?.touched" class="text-danger">
            ูุญู ุงูุฅูุงูุฉ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="patientStatus" class="form-label">ุงูุญุงูุฉ</label>
          <select id="patientStatus" class="form-select shadow-none" formControlName="patientStatus">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
            <option value="Staying">ุฅูุงูุฉ</option>
            <option value="Surgery">ุนูููุฉ</option>
          </select>
          <div *ngIf="patientForm.get('patientStatus')?.invalid && patientForm.get('patientStatus')?.touched" class="text-danger">
            ุงูุญุงูุฉ ูุทููุจุฉ
          </div>
        </div>
      </div>
    
      <h4 class="mt-4 mb-3">๐ฅุจูุงูุงุช ุงูุฃูุงูุฉ</h4>
      <div class="row mb-3">
        <div class="col-lg-4">
          <label for="admissionDate" class="form-label">ุชุงุฑูุฎ ุงูุฏุฎูู</label>
          <input type="date" id="admissionDate" class="form-control shadow-none" value="{{currentDate}}" disabled />
        </div>
        <div class="col-lg-4">
          <label for="departmentId" class="form-label">ุงููุณู</label>
          <select id="departmentId" class="form-select shadow-none" formControlName="departmentId" (change)="onDepartmentChange()">
            <option selected disabled value="">ุงุฎุชุฑ ุงููุณู</option>
            <option *ngFor="let department of departments" [value]="department.id">{{department.name}}</option>
          </select>
          <div *ngIf="patientForm.get('departmentId')?.invalid && patientForm.get('departmentId')?.touched" class="text-danger">
            ุงููุณู ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="doctorId" class="form-label">ุงูุทุจูุจ ุงููุณุคูู</label>
          <select id="doctorId" class="form-select shadow-none" formControlName="doctorId">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุทุจูุจ ุงููุณุฆูู</option>
            <option *ngFor="let doctor of filteredDoctors" [value]="doctor.id">{{doctor.fullName}}</option>
          </select>
          <div *ngIf="patientForm.get('doctorId')?.invalid && patientForm.get('doctorId')?.touched" class="text-danger">
            ุงูุทุจูุจ ุงููุณุคูู ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="roomType" class="form-label">ููุน ุงูุบุฑูุฉ</label>
          <select id="roomType" class="form-select shadow-none" formControlName="roomType" (change)="onRoomTypeChange()">
            <option selected disabled value="">ุงุฎุชุฑ ุงูููุน</option>
            <option value="Shared">ุนุงุฏูุฉ</option>
            <option value="Private">ููุฏููุฉ</option>
          </select>
          <div *ngIf="patientForm.get('roomType')?.invalid && patientForm.get('roomType')?.touched" class="text-danger">
            ููุน ุงูุบุฑูุฉ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="roomId" class="form-label">ุฑูู ุงูุบุฑูุฉ</label>
          <select id="roomId" class="form-select shadow-none" formControlName="roomId" (change)="onRoomChange()">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุบุฑูุฉ</option>
            <option *ngFor="let room of filteredRooms" [value]="room.id">{{room.number}}</option>
          </select>
          <div *ngIf="patientForm.get('roomId')?.invalid && patientForm.get('roomId')?.touched" class="text-danger">
            ุฑูู ุงูุบุฑูุฉ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="bedId" class="form-label">ุฑูู ุงูุณุฑูุฑ</label>
          <select id="bedId" class="form-select shadow-none" formControlName="bedId">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุณุฑูุฑ</option>
            <option *ngFor="let bed of filteratedBeds" [value]="bed.id">{{bed.number}}</option>
          </select>
          <div *ngIf="patientForm.get('bedId')?.invalid && patientForm.get('bedId')?.touched" class="text-danger">
            ุฑูู ุงูุณุฑูุฑ ูุทููุจ
          </div>
        </div>
        <div class="col-lg-12 text-center mt-3">
          <h5>ุชูููุฉ ุงูุฅูุงูุฉ ุจุงูููู : <span> 60 ุฌููู</span></h5>
        </div>
      </div>
    
      <h4 class="mt-4 mb-3">๐ูุงุฆูุฉ ุงูุงุชุตุงู</h4>
      <div class="row">
        <div class="col-lg-6">
          <label for="emergencyPhone01">ุฑูู ุงููุงุชู 1</label>
          <input
            id="emergencyPhone01"
            formControlName="emergencyPhone01"
            type="text"
            class="form-control shadow-none"
            placeholder="ุฃุฏุฎู ุฑูู ุงููุงุชู"
          />
          <div *ngIf="patientForm.get('emergencyPhone01')?.invalid && patientForm.get('emergencyPhone01')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('emergencyPhone01')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('emergencyPhone01')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
          </div>
        </div>
        <div class="col-lg-6">
          <label for="emergencyContact01">ุฌูุฉ ุงูุงุชุตุงู 1</label>
          <input
            id="emergencyContact01"
            formControlName="emergencyContact01"
            type="text"
            class="form-control shadow-none"
            placeholder="ุฃุฏุฎู ุงุณู ุฌูุฉ ุงูุงุชุตุงู"
          />
          <div *ngIf="patientForm.get('emergencyContact01')?.invalid && patientForm.get('emergencyContact01')?.touched" class="text-danger">
            ุงุณู ุฌูุฉ ุงูุงุชุตุงู ูุทููุจ
          </div>
        </div>
        <div *ngIf="showSecondContact">
          <div class="col-lg-6">
            <label for="emergencyPhone02">ุฑูู ุงููุงุชู 2</label>
            <input
              id="emergencyPhone02"
              formControlName="emergencyPhone02"
              type="text"
              class="form-control shadow-none"
              placeholder="ุฃุฏุฎู ุฑูู ุงููุงุชู"
            />
            <div *ngIf="patientForm.get('emergencyPhone02')?.invalid && patientForm.get('emergencyPhone02')?.touched" class="text-danger">
              <ng-container *ngIf="patientForm.get('emergencyPhone02')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
              <ng-container *ngIf="patientForm.get('emergencyPhone02')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
            </div>
          </div>
          <div class="col-lg-6">
            <label for="emergencyContact02">ุฌูุฉ ุงูุงุชุตุงู 2</label>
            <input
              id="emergencyContact02"
              formControlName="emergencyContact02"
              type="text"
              class="form-control shadow-none"
              placeholder="ุฃุฏุฎู ุงุณู ุฌูุฉ ุงูุงุชุตุงู"
            />
            <div *ngIf="patientForm.get('emergencyContact02')?.invalid && patientForm.get('emergencyContact02')?.touched" class="text-danger">
              ุงุณู ุฌูุฉ ุงูุงุชุตุงู ูุทููุจ
            </div>
          </div>
        </div>
      </div>
      <button type="button" class="btn-blue mt-2" (click)="addSecondContact()" [disabled]="showSecondContact">
        ุฅุถุงูุฉ ุฌูุฉ ุงุชุตุงู
      </button>
    
      <h4 class="mt-4 mb-3">๐กุจูุงูุงุช ุงูุชุฃููู</h4>
      <div class="row mb-4">
        <div class="col-lg-4">
          <label for="insuranceCompanyId" class="form-label">ุดุฑูุฉ ุงูุชุฃููู</label>
          <select id="insuranceCompanyId" class="form-select shadow-none" formControlName="insuranceCompanyId">
            <option selected disabled value="">ุงุฎุชุฑ ุดุฑูุฉ ุงูุชุฃููู</option>
            <option value="ุดุฑูุฉ 1">ุดุฑูุฉ 1</option>
            <option value="ุดุฑูุฉ 2">ุดุฑูุฉ 2</option>
          </select>
          <div *ngIf="patientForm.get('insuranceCompanyId')?.invalid && patientForm.get('insuranceCompanyId')?.touched" class="text-danger">
            ุดุฑูุฉ ุงูุชุฃููู ูุทููุจุฉ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="insuranceCategoryId" class="form-label">ูุฆุฉ ุงูุชุฃููู</label>
          <select id="insuranceCategoryId" class="form-select shadow-none" formControlName="insuranceCategoryId">
            <option selected disabled value="">ุงุฎุชุฑ ูุฆุฉ ุงูุชุฃููู</option>
            <option value="ูุฆุฉ 1">ูุฆุฉ 1</option>
            <option value="ูุฆุฉ 2">ูุฆุฉ 2</option>
          </select>
          <div *ngIf="patientForm.get('insuranceCategoryId')?.invalid && patientForm.get('insuranceCategoryId')?.touched" class="text-danger">
            ูุฆุฉ ุงูุชุฃููู ูุทููุจุฉ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="insuranceNumber" class="form-label">ุฑูู ุงูุชุฃููู</label>
          <input type="text" id="insuranceNumber" class="form-control shadow-none" formControlName="insuranceNumber" />
          <div *ngIf="patientForm.get('insuranceNumber')?.invalid && patientForm.get('insuranceNumber')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('insuranceNumber')?.errors?.['required']">ุฑูู ุงูุชุฃููู ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('insuranceNumber')?.errors?.['pattern']">ุฑูู ุงูุชุฃููู ูุฌุจ ุฃู ูููู ุฃุฑูุงููุง ููุท</ng-container>
          </div>
        </div>
      </div>
    
      <h4 class="mt-4 mb-3">๐ุจูุงูุงุช ุฅุถุงููุฉ</h4>
      <div class="row mb-4">
        <div class="col-lg-4">
          <label for="healthStatus" class="form-label">ุงูุญุงูุฉ ุงูุตุญูุฉ ุงูุญุงููุฉ</label>
          <select id="healthStatus" class="form-select shadow-none" formControlName="healthStatus">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุญุงูุฉ ุงูุตุญูุฉ</option>
            <option value="ูุณุชูุฑุฉ">ูุณุชูุฑุฉ</option>
            <option value="ุบูุฑ ูุณุชูุฑุฉ">ุบูุฑ ูุณุชูุฑุฉ</option>
            <option value="ุญุฑุฌุฉ">ุญุฑุฌุฉ</option>
          </select>
          <div *ngIf="patientForm.get('healthStatus')?.invalid && patientForm.get('healthStatus')?.touched" class="text-danger">
            ุงูุญุงูุฉ ุงูุตุญูุฉ ูุทููุจุฉ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="initialDiagnosis" class="form-label">ุชุดุฎูุต ูุจุฏุฆู</label>
          <input type="text" id="initialDiagnosis" class="form-control shadow-none" formControlName="initialDiagnosis" />
          <div *ngIf="patientForm.get('initialDiagnosis')?.invalid && patientForm.get('initialDiagnosis')?.touched" class="text-danger">
            ุงูุชุดุฎูุต ุงููุจุฏุฆู ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4">
          <label for="notes" class="form-label">ููุงุญุธุงุช ุนูุฏ ุงูุฏุฎูู</label>
          <input type="text" id="notes" class="form-control shadow-none" formControlName="notes" />
        </div>
        <div class="col-lg-12 mt-3">
          <label class="form-label d-block">ูู ูู ูุฑุงููุ</label>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              id="hasCompanionYes"
              [value]="true"
              formControlName="hasCompanion"
            />
            <label class="form-check-label" for="hasCompanionYes">ูุนู</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              id="hasCompanionNo"
              [value]="false"
              formControlName="hasCompanion"
            />
            <label class="form-check-label" for="hasCompanionNo">ูุง</label>
          </div>
          <div *ngIf="patientForm.get('hasCompanion')?.invalid && patientForm.get('hasCompanion')?.touched" class="text-danger">
            ุงุฎุชูุงุฑ ุงููุฑุงูู ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4 mt-3" *ngIf="patientForm.get('hasCompanion')?.value === true">
          <label for="companionName" class="form-label">ุงุณู ุงููุฑุงูู</label>
          <input type="text" id="companionName" class="form-control shadow-none" formControlName="companionName" />
          <div *ngIf="patientForm.get('companionName')?.invalid && patientForm.get('companionName')?.touched" class="text-danger">
            ุงุณู ุงููุฑุงูู ูุทููุจ
          </div>
        </div>
        <div class="col-lg-4 mt-3" *ngIf="patientForm.get('hasCompanion')?.value === true">
          <label for="companionNationalId" class="form-label">ุงูุฑูู ุงููููู ูููุฑุงูู</label>
          <input type="text" id="companionNationalId" class="form-control shadow-none" formControlName="companionNationalId" />
          <div *ngIf="patientForm.get('companionNationalId')?.invalid && patientForm.get('companionNationalId')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('companionNationalId')?.errors?.['required']">ุงูุฑูู ุงููููู ูููุฑุงูู ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('companionNationalId')?.errors?.['pattern']">ุงูุฑูู ุงููููู ูุฌุจ ุฃู ูููู 14 ุฑูููุง</ng-container>
          </div>
        </div>
        <div class="col-lg-4 mt-3" *ngIf="patientForm.get('hasCompanion')?.value === true">
          <label for="companionPhone" class="form-label">ุฑูู ุงููุงุชู</label>
          <input type="text" id="companionPhone" class="form-control shadow-none" formControlName="companionPhone" />
          <div *ngIf="patientForm.get('companionPhone')?.invalid && patientForm.get('companionPhone')?.touched" class="text-danger">
            <ng-container *ngIf="patientForm.get('companionPhone')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
            <ng-container *ngIf="patientForm.get('companionPhone')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
          </div>
        </div>
      </div>
    
      <div class="row justify-content-center gap-2">
        <button [disabled]="patientForm.invalid" type="submit" class="btn-blue col-2">ุฅุถุงูุฉ</button>
        <button type="reset" class="btn-outline-blue col-2">ุฅูุบุงุก</button>
      </div>
    </form>
  </div>
</main>