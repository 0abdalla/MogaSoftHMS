<main id="staff-form" @fadeIn>
    <div class="container-fluid">
        <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="form p-2">
            <p-toast position="top-left"></p-toast>
            <h4 class="mb-3">๐งโ๐ญ ุจูุงูุงุช ุงูููุธู</h4>
            <div class="row mb-3">
                <div class="col-lg-3">
                    <label class="form-label">ุงูุงุณู ุจุงููุงูู</label>
                    <input type="text" class="form-control shadow-none" formControlName="fullName" placeholder="ุฃุฏุฎู ุงูุงุณู ุจุงููุงูู">
                    <div *ngIf="employeeForm.get('fullName')?.invalid && employeeForm.get('fullName')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('fullName')?.errors?.['required']">ุงูุงุณู ุจุงููุงูู ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-3">
                    <label class="form-label">ุงูุฑูู ุงููููู</label>
                    <input type="text" class="form-control shadow-none" formControlName="nationalId" placeholder="ุฃุฏุฎู ุงูุฑูู ุงููููู">
                    <div *ngIf="employeeForm.get('nationalId')?.invalid && employeeForm.get('nationalId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('nationalId')?.errors?.['required']">ุงูุฑูู ุงููููู ูุทููุจ</ng-container>
                        <ng-container *ngIf="employeeForm.get('nationalId')?.errors?.['pattern']">ุงูุฑูู ุงููููู ุบูุฑ ุตุงูุญ</ng-container>
                    </div>
                </div>
                <div class="col-lg-3">
                    <label class="form-label">ุงูููุน</label>
                    <select class="form-select shadow-none" formControlName="gender">
                    <option selected disabled value="">ุงุฎุชุฑ ุงูููุน</option>
                    <option value="Male">ุฐูุฑ</option>
                    <option value="Female">ุฃูุซู</option>
                </select>
                    <div *ngIf="employeeForm.get('gender')?.invalid && employeeForm.get('gender')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('gender')?.errors?.['required']">ุงูููุน ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-3">
                    <label class="form-label">ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ</label>
                    <select class="form-select shadow-none" formControlName="maritalStatus">
                    <option selected disabled value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
                    <option value="Single">ุฃุนุฒุจ</option>
                    <option value="Married">ูุชุฒูุฌ</option>
                    <option value="Divorced">ูุทูู</option>
                    <option value="Widowed">ุฃุฑูู</option>
                </select>
                    <div *ngIf="employeeForm.get('maritalStatus')?.invalid && employeeForm.get('maritalStatus')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('maritalStatus')?.errors?.['required']">ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ ูุทููุจุฉ</ng-container>
                    </div>
                </div>
            </div>

            <h4 class="mb-3">๐ ุทุฑู ุงูุงุชุตุงู</h4>
            <div class="row mb-3">
                <div class="col-lg-4">
                    <label class="form-label">ุฑูู ุงููุงุชู</label>
                    <input type="text" class="form-control shadow-none" formControlName="phoneNumber" placeholder="ุฃุฏุฎู ุฑูู ุงููุงุชู">
                    <div *ngIf="employeeForm.get('phoneNumber')?.invalid && employeeForm.get('phoneNumber')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('phoneNumber')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
                        <ng-container *ngIf="employeeForm.get('phoneNumber')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุงูุญ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4">
                    <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" class="form-control shadow-none" formControlName="email" placeholder="ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
                    <div *ngIf="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('email')?.errors?.['required']">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจ</ng-container>
                        <ng-container *ngIf="employeeForm.get('email')?.errors?.['email']">ุจุฑูุฏ ุฅููุชุฑููู ุบูุฑ ุตุงูุญ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4">
                    <label class="form-label">ุงูุนููุงู</label>
                    <input type="text" class="form-control shadow-none" formControlName="address" placeholder="ุฃุฏุฎู ุงูุนููุงู">
                    <div *ngIf="employeeForm.get('address')?.invalid && employeeForm.get('address')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('address')?.errors?.['required']">ุงูุนููุงู ูุทููุจ</ng-container>
                    </div>
                </div>
            </div>

            <h4 class="mb-3">๐ผ ุจูุงูุงุช ุงูุชูุธูู</h4>
            <div class="row mb-3">
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงููุณู</label>
                    <select class="form-select shadow-none" formControlName="JobDepartmentId">
                    <option selected disabled value="">ุงุฎุชุฑ ุงููุณู</option>
                    <option *ngFor="let dept of jobDepartments" [value]="dept.id">{{ dept.name }}</option>
                    <option disabled *ngIf="jobDepartments?.length === 0">ูุง ููุฌุฏ ุฃูุณุงู ูุชุงุญุฉ</option>
                </select>
                    <div *ngIf="employeeForm.get('JobDepartmentId')?.invalid && employeeForm.get('JobDepartmentId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('JobDepartmentId')?.errors?.['required']">ุงููุณู ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงููุณุชูู ุงููุธููู</label>
                    <select class="form-select shadow-none" formControlName="JobLevelId">
                    <option selected disabled value="">ุงุฎุชุฑ ุงููุณุชูู</option>
                    <option *ngFor="let level of jobLevels" [value]="level.id">{{ level.name }}</option>
                    <option disabled *ngIf="jobLevels?.length === 0">ูุง ููุฌุฏ ูุณุชููุงุช ูุชุงุญุฉ</option>
                </select>
                    <div *ngIf="employeeForm.get('JobLevelId')?.invalid && employeeForm.get('JobLevelId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('JobLevelId')?.errors?.['required']">ุงููุณุชูู ุงููุธููู ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงููุณูู ุงููุธููู</label>
                    <select class="form-select shadow-none" formControlName="JobTitleId">
                    <option selected disabled value="">ุงุฎุชุฑ ุงููุณูู</option>
                    <option *ngFor="let title of filteredJobTitles" [value]="title.id">{{ title.name }}</option>
                    <option disabled *ngIf="filteredJobTitles?.length === 0">ูุง ููุฌุฏ ูุธุงุฆู ูุชุงุญุฉ</option>
                </select>
                    <div *ngIf="employeeForm.get('JobTitleId')?.invalid && employeeForm.get('JobTitleId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('JobTitleId')?.errors?.['required']">ุงููุณูู ุงููุธููู ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุชุตููู ุงููุธููุฉ</label>
                    <select class="form-select shadow-none" formControlName="JobTypeId">
                    <option selected disabled value="">ุงุฎุชุฑ ุชุตููู ุงููุธููุฉ</option>
                    <option *ngFor="let type of jobTypes" [value]="type.id">{{ type.name }}</option>
                    <option disabled *ngIf="jobTypes?.length === 0">ูุง ููุฌุฏ ุชุตูููุงุช ูุชุงุญุฉ</option>
                </select>
                    <div *ngIf="employeeForm.get('JobTypeId')?.invalid && employeeForm.get('JobTypeId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('JobTypeId')?.errors?.['required']">ุชุตููู ุงููุธููุฉ ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุชุงุฑูุฎ ุงูุชุนููู</label>
                    <input type="date" class="form-control shadow-none" formControlName="hireDate">
                    <div *ngIf="employeeForm.get('hireDate')?.invalid && employeeForm.get('hireDate')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('hireDate')?.errors?.['required']">ุชุงุฑูุฎ ุงูุชุนููู ูุทููุจ</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงููุฑุน</label>
                    <select class="form-select shadow-none" formControlName="branchId">
                    <option selected disabled value="">ุงุฎุชุฑ ุงููุฑุน</option>
                    <option *ngFor="let branch of branches" [value]="branch.id">{{ branch.name }}</option>
                    <option disabled *ngIf="branches?.length === 0">ูุง ููุฌุฏ ูุฑูุน ูุชุงุญุฉ</option>
                </select>
                    <div *ngIf="employeeForm.get('branchId')?.invalid && employeeForm.get('branchId')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('branchId')?.errors?.['required']">ุงููุฑุน ูุทููุจ</ng-container>
                    </div>
                </div>

                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงูุฑุงุชุจ ุงูุฃุณุงุณู</label>
                    <input type="number" class="form-control shadow-none" formControlName="basicSalary" placeholder="ุฃุฏุฎู ุงูุฑุงุชุจ ุงูุฃุณุงุณู">
                    <div *ngIf="employeeForm.get('basicSalary')?.invalid && employeeForm.get('basicSalary')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('basicSalary')?.errors?.['required']">ุงูุฑุงุชุจ ุงูุฃุณุงุณู ูุทููุจ</ng-container>
                    </div>
                </div>

                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงูุถุฑุงุฆุจ (%)</label>
                    <input type="number" class="form-control shadow-none" formControlName="tax" placeholder="ุฃุฏุฎู ูุณุจุฉ ุงูุถุฑุงุฆุจ" min="0" max="100">
                    <div *ngIf="employeeForm.get('tax')?.invalid && employeeForm.get('tax')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('tax')?.errors?.['required']">ูููุฉ ุงูุถุฑุงุฆุจ ูุทููุจุฉ</ng-container>
                        <ng-container *ngIf="employeeForm.get('tax')?.errors?.['min']">ูููุฉ ุงูุถุฑุงุฆุจ ูุฌุจ ุฃู ุชููู ุฃูุจุฑ ูู 0</ng-container>
                        <ng-container *ngIf="employeeForm.get('tax')?.errors?.['max']">ูููุฉ ุงูุถุฑุงุฆุจ ูุฌุจ ุฃู ุชููู ุฃูู ูู 100</ng-container>
                    </div>
                </div>

                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุงูุชุฃูููุงุช (%)</label>
                    <input type="number" class="form-control shadow-none" formControlName="insurance" placeholder="ุฃุฏุฎู ูุณุจุฉ ุงูุชุฃูููุงุช" min="0" max="100">
                    <div *ngIf="employeeForm.get('insurance')?.invalid && employeeForm.get('insurance')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('insurance')?.errors?.['required']">ูููุฉ ุงูุชุฃูููุงุช ูุทููุจุฉ</ng-container>
                        <ng-container *ngIf="employeeForm.get('insurance')?.errors?.['min']">ูููุฉ ุงูุชุฃูููุงุช ูุฌุจ ุฃู ุชููู ุฃูุจุฑ ูู 0</ng-container>
                        <ng-container *ngIf="employeeForm.get('insurance')?.errors?.['max']">ูููุฉ ุงูุชุฃูููุงุช ูุฌุจ ุฃู ุชููู ุฃูู ูู 100</ng-container>
                    </div>
                </div>

                <div class="col-lg-4 mb-3">
                    <label class="form-label">ุฃูุงู ุงูุฃุฌุงุฒุงุช ุงูุณูููุฉ ุงููุฏููุนุฉ</label>
                    <input type="number" class="form-control shadow-none" formControlName="vacationDays" placeholder="ุฃูุงู ุงูุฃุฌุงุฒุงุช ุงูุณูููุฉ ุงููุฏููุนุฉ" min="0" max="30">
                    <div *ngIf="employeeForm.get('vacationDays')?.invalid && employeeForm.get('vacationDays')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('vacationDays')?.errors?.['required']">ุงูุฃุฌุงุฒุงุช ุงูุณูููุฉ ูุทููุจุฉ</ng-container>
                        <ng-container *ngIf="employeeForm.get('vacationDays')?.errors?.['min']">ุงูุฃุฌุงุฒุงุช ุงูุณูููุฉ ูุฌุจ ุฃู ุชููู ุฃูุจุฑ ูู 0</ng-container>
                        <ng-container *ngIf="employeeForm.get('vacationDays')?.errors?.['max']">ุงูุฃุฌุงุฒุงุช ุงูุณูููุฉ ูุฌุจ ุฃู ุชููู ุฃูู ูู 30</ng-container>
                    </div>
                </div>

                <div class="col-lg-12 text-center mt-2" *ngIf="employeeForm.get('insurance')?.value !== null">
                    <div [ngClass]="{ 'text-success': netSalary > 0, 'text-danger': netSalary <= 0 }" class="fw-bold">
                        ุตุงูู ุงูุฑุงุชุจ: {{ netSalary | number:'1.2-2' }} ุฌููู
                        <span *ngIf="netSalary <= 0" class="ms-2">ูุง ูููู ุฃู ูููู ุตุงูู ุงูุฑุงุชุจ ุตูุฑูุง ุฃู ุณุงูุจูุง</span>
                    </div>
                </div>

            </div>
            <h4 class="mb-3">๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู</h4>
            <div class="row mb-3">
                <div class="col-lg-4">
                    <label class="form-label">ุงูุชูููุถ</label>
                    <select class="form-select shadow-none" formControlName="isAuthorized">
              <option selected disabled [ngValue]="null">ุงุฎุชุฑ ุญุงูุฉ ุงูุชูููุถ</option>
              <option [ngValue]="true">ูุณููุญ</option>
              <option [ngValue]="false">ุบูุฑ ูุณููุญ</option>
            </select>
                    <div *ngIf="employeeForm.get('isAuthorized')?.invalid && employeeForm.get('isAuthorized')?.touched" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('isAuthorized')?.errors?.['required']">ุญุงูุฉ ุงูุชูููุถ ูุทููุจุฉ</ng-container>
                    </div>
                </div>

                <div class="col-lg-4" *ngIf="employeeForm.get('isAuthorized')?.value === true">
                    <label class="form-label">ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" class="form-control shadow-none" formControlName="userName" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู">
                    <div *ngIf="employeeForm.get('userName')?.invalid && (employeeForm.get('userName')?.touched)" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('userName')?.errors?.['required']">ุงุณู ุงููุณุชุฎุฏู ูุทููุจ</ng-container>
                    </div>
                </div>

                <div class="col-lg-4" *ngIf="employeeForm.get('isAuthorized')?.value === true">
                    <label class="form-label">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" class="form-control shadow-none" formControlName="password" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    <div *ngIf="employeeForm.get('password')?.invalid && (employeeForm.get('password')?.touched)" class="text-danger">
                        <ng-container *ngIf="employeeForm.get('password')?.errors?.['required']">ูููุฉ ุงููุฑูุฑ ูุทููุจุฉ</ng-container>
                    </div>
                </div>
            </div>

            <h4 class="mb-3">๐ ุงููุฑููุงุช</h4>
            <div class="row mb-3">
                <div class="col-lg-12">
                    <label class="form-label" for="Files">ูุฑููุงุช</label>
                    <input type="file" class="form-control shadow-none" id="Files" (change)="onFileSelected($event)" multiple accept=".png,.jpg,.jpeg,.pdf">
                </div>
                <div class="col-lg-12 mt-3">
                    <label class="form-label">ููุงุญุธุงุช</label>
                    <textarea rows="2" class="form-control shadow-none" formControlName="notes" placeholder="ุฃุฏุฎู ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ"></textarea>
                </div>
            </div>

            <div class="row justify-content-center gap-2 px-3">
                <button type="submit" [disabled]="employeeForm.invalid" class="btn-blue col-2">ุญูุธ ุงูุจูุงูุงุช</button>
                <button type="reset" class="btn-outline-blue col-2">ุงูุบุงุก</button>
            </div>
        </form>
    </div>
</main>