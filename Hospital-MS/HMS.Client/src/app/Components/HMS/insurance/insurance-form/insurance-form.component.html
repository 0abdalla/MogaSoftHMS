<main id="ins-form">
    <div class="container-fluid">
      <form [formGroup]="insuranceForm" class="form p-2" (ngSubmit)="onSubmit()">
        <h4>๐ขุชูุงุตูู ุงูุดุฑูุฉ</h4>
        <div class="row">
          <div class="col-lg-6">
            <label class="form-label" for="name">ุงุณู ุงูุดุฑูุฉ:</label>
            <input id="name" class="form-control shadow-none" formControlName="name" placeholder="ุฃุฏุฎู ุงุณู ุงูุดุฑูุฉ">
            <div *ngIf="insuranceForm.get('name')?.touched && insuranceForm.get('name')?.hasError('required')" class="text-danger">
              ุงุณู ุงูุดุฑูุฉ ูุทููุจ
            </div>
  
            <label class="form-label" for="code">ููุฏ ุงูุดุฑูุฉ:</label>
            <input id="code" class="form-control shadow-none" formControlName="code" placeholder="ุฃุฏุฎู ููุฏ ุงูุดุฑูุฉ">
          </div>
  
          <div class="col-lg-6">
            <label class="form-label" for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
            <input id="email" class="form-control shadow-none" formControlName="email" placeholder="ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
            <div *ngIf="insuranceForm.get('email')?.touched && insuranceForm.get('email')?.hasError('required')" class="text-danger">
              ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจ
            </div>
            <div *ngIf="insuranceForm.get('email')?.touched && insuranceForm.get('email')?.hasError('email')" class="text-danger">
              ูุฑุฌู ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
            </div>
  
            <label class="form-label" for="contactNumber">ุฑูู ุงูุชูุงุตู:</label>
            <input id="contactNumber" class="form-control shadow-none" formControlName="contactNumber" placeholder="ุฃุฏุฎู ุฑูู ุงูุชูุงุตู">
            <div *ngIf="insuranceForm.get('contactNumber')?.touched && insuranceForm.get('contactNumber')?.hasError('required')" class="text-danger">
              ุฑูู ุงูุชูุงุตู ูุทููุจ
            </div>
          </div>
        </div>
    
        <h4 class="mt-3">๐ุชูุงุตูู ุงูุนูุฏ</h4>
        <div formGroupName="contractDetails">
          <div class="row">
            <div class="col-lg-6">
              <label class="form-label" for="startDate">ุชุงุฑูุฎ ุจุฏุก ุงูุนูุฏ:</label>
              <input id="startDate" type="date" class="form-control shadow-none" formControlName="startDate">
              <div *ngIf="insuranceForm.get('contractDetails')?.get('startDate')?.touched && insuranceForm.get('contractDetails')?.get('startDate')?.hasError('required')" class="text-danger">
                ุชุงุฑูุฎ ุงูุจุฏุก ูุทููุจ
              </div>
            </div>
  
            <div class="col-lg-6">
              <label class="form-label" for="endDate">ุชุงุฑูุฎ ุงูุชูุงุก ุงูุนูุฏ:</label>
              <input id="endDate" type="date" class="form-control shadow-none" formControlName="endDate">
              <div *ngIf="insuranceForm.get('contractDetails')?.get('endDate')?.touched && insuranceForm.get('contractDetails')?.get('endDate')?.hasError('required')" class="text-danger">
                ุชุงุฑูุฎ ุงูุงูุชูุงุก ูุทููุจ
              </div>
            </div>
          </div>
  
          <!-- <label class="form-label" for="contractDescription">ูุตู ุงูุนูุฏ:</label>
          <textarea id="contractDescription" class="form-control shadow-none" formControlName="description" placeholder="ุฃุฏุฎู ูุตู ุงูุนูุฏ"></textarea> -->
  
          <h4 class="mt-3">๐ก๏ธูุฆุงุช ุงูุชุบุทูุฉ</h4>
          <div class="mb-3" formArrayName="categories">
            <div *ngFor="let category of categories.controls; let i = index" [formGroupName]="i" class="row mb-2 align-items-end">
              <div class="col-lg-5">
                <label class="form-label">ุงุณู ุงููุฆุฉ</label>
                <input class="form-control shadow-none" formControlName="name" placeholder="ุฃุฏุฎู ุงุณู ุงููุฆุฉ" />
                <div *ngIf="category.get('name')?.touched && category.get('name')?.hasError('required')" class="text-danger">
                  ุงุณู ุงููุฆุฉ ูุทููุจ
                </div>
              </div>
              <div class="col-lg-5">
                <label class="form-label">ูุณุจุฉ ุงูุชุบุทูุฉ (%)</label>
                <input type="number" class="form-control shadow-none" formControlName="coveragePercentage" placeholder="ุฃุฏุฎู ูุณุจุฉ ุงูุชุบุทูุฉ (%)" min="0" max="100" />
                <div *ngIf="category.get('coveragePercentage')?.touched && category.get('coveragePercentage')?.hasError('required')" class="text-danger">
                  ูุณุจุฉ ุงูุชุบุทูุฉ ูุทููุจุฉ
                </div>
                <div *ngIf="category.get('coveragePercentage')?.touched && (category.get('coveragePercentage')?.hasError('min') || category.get('coveragePercentage')?.hasError('max'))" class="text-danger">
                  ูุฌุจ ุฃู ุชููู ุงููุณุจุฉ ุจูู 0 ู100
                </div>
              </div>
              <div class="col-lg-2">
                <button type="button" class="btn-blue" (click)="addCategory()">ุฅุถุงูุฉ ูุฆุฉ</button>
                <button type="button" class="btn-red mx-1" (click)="removeCategory(i)">ุญุฐู</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row justify-content-center gap-2 px-3">
          <button type="submit" [disabled]="!insuranceForm.valid" class="btn-blue col-2">ุญูุธ ุงูุจูุงูุงุช</button>
          <button type="reset" class="btn-outline-blue col-2">ุฅูุบุงุก</button>
        </div>
      </form>
    </div>
  </main>
  