<main id="emergency-reception" @fadeIn>
    <div class="container-fluid">
        <app-breadcrumb [TitleList]="TitleList"></app-breadcrumb>
        <form [formGroup]="emergencyForm" class="form p-2" (ngSubmit)="submitForm()">
            <p-toast position="top-left"></p-toast>
            <h4>๐ฅุจูุงูุงุช ุงูุงุณุชูุจุงู</h4>
            <div class="row">
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="name" class="form-label">ุฅุณู ุงููุฑูุถ</label>
                        <input id="name" formControlName="patientName" placeholder="ุฃุฏุฎู ุฅุณู ุงููุฑูุถ" class="form-control shadow-none" />
                        <div *ngIf="emergencyForm.get('patientName')?.invalid && emergencyForm.get('patientName')?.touched" class="text-danger">
                            ุงุณู ุงููุฑูุถ ูุทููุจ
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="patientPhone" class="form-label">ุฑูู ูุงุชู ุงููุฑูุถ</label>
                        <input id="patientPhone" formControlName="patientPhone" placeholder="ุฃุฏุฎู ุฑูู ูุงุชู ุงููุฑูุถ" class="form-control shadow-none" />
                        <div *ngIf="emergencyForm.get('patientPhone')?.invalid && emergencyForm.get('patientPhone')?.touched" class="text-danger">
                            <ng-container *ngIf="emergencyForm.get('patientPhone')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
                            <ng-container *ngIf="emergencyForm.get('patientPhone')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="triageLevel" class="form-label">ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ</label>
                        <select id="triageLevel" formControlName="emergencyLevel" class="form-select shadow-none triage-select">
                <option value="" disabled selected>ุงุฎุชุฑ ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ</option>
                <option value="ุญุฑุฌุฉ">ุญุฑุฌุฉ</option>
                <option value="ูุชูุณุทุฉ">ูุชูุณุทุฉ</option>
                <option value="ุฎูููุฉ">ุฎูููุฉ</option>
              </select>
                        <div *ngIf="emergencyForm.get('emergencyLevel')?.invalid && emergencyForm.get('emergencyLevel')?.touched" class="text-danger">
                            ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ ูุทููุจุฉ
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-lg-4 mb-3">
                    <label for="companion-name" class="form-label">ุฅุณู ุงููุฑุงูู</label>
                    <input id="companion-name" formControlName="companionName" placeholder="ุฃุฏุฎู ุฅุณู ุงููุฑุงูู" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionName')?.invalid && emergencyForm.get('companionName')?.touched" class="text-danger">
                        ุงุณู ุงููุฑุงูู ูุทููุจ
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label for="companion-id" class="form-label">ุงูุฑูู ุงููููู ูููุฑุงูู</label>
                    <input id="companion-id" formControlName="companionNationalId" placeholder="ุฃุฏุฎู ุงูุฑูู ุงููููู ูููุฑุงูู" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionNationalId')?.invalid && emergencyForm.get('companionNationalId')?.touched" class="text-danger">
                        <ng-container *ngIf="emergencyForm.get('companionNationalId')?.errors?.['required']">ุงูุฑูู ุงููููู ูููุฑุงูู ูุทููุจ</ng-container>
                        <ng-container *ngIf="emergencyForm.get('companionNationalId')?.errors?.['pattern']">ุงูุฑูู ุงููููู ูุฌุจ ุฃู ูููู 14 ุฑูููุง</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label for="companion-phone" class="form-label">ุฑูู ูุงุชู ุงููุฑุงูู</label>
                    <input id="companion-phone" formControlName="companionPhone" placeholder="ุฃุฏุฎู ุฑูู ูุงุชู ุงููุฑุงูู" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionPhone')?.invalid && emergencyForm.get('companionPhone')?.touched" class="text-danger">
                        <ng-container *ngIf="emergencyForm.get('companionPhone')?.errors?.['required']">ุฑูู ุงููุงุชู ูุทููุจ</ng-container>
                        <ng-container *ngIf="emergencyForm.get('companionPhone')?.errors?.['pattern']">ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ</ng-container>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <label class="form-label">ููุงุญุธุงุช</label>
                <textarea formControlName="notes" rows="3" class="form-control shadow-none"></textarea>
            </div>
            <hr>
            <div class="card-header border-bottom bg-gray d-flex align-items-center justify-content-between hh-50 px-3">
            <h5 class="mb-0 fw-bold">
                <span>๐ุจูุงูุงุช ุฅุถุงููุฉ</span>
            </h5>
            <button class="btn-blue" (click)="showAdditionalInfo = !showAdditionalInfo">
                {{ showAdditionalInfo ? 'ุฅุฎูุงุก' : 'ุฅุธูุงุฑ' }}
            </button>
            </div>
            <div class="row mb-3" *ngIf="showAdditionalInfo">
                <div class="col-lg-4">
                    <label for="insuranceCompanyId" class="form-label">ุดุฑูุฉ ุงูุชุฃููู</label>
                    <select id="insuranceCompanyId" class="form-select shadow-none" formControlName="insuranceCompanyId">
            <option selected disabled value="">ุงุฎุชุฑ ุดุฑูุฉ ุงูุชุฃููู</option>
            <option *ngFor="let insuranceCompany of insuranceCompanies" [value]="insuranceCompany.id">{{ insuranceCompany.name }}</option>
          </select>
                </div>
                <div class="col-lg-4">
                  <label for="insuranceCategoryId" class="form-label">ูุฆุฉ ุงูุชุฃููู</label>
                  <select id="insuranceCategoryId" class="form-select shadow-none" formControlName="insuranceCategoryId">
                    <option selected disabled value="">ุงุฎุชุฑ ูุฆุฉ ุงูุชุฃููู</option>
                    <option *ngFor="let insuranceCategory of insuranceCompanies" [value]="insuranceCategory.id">{{insuranceCategory.name}}</option>
                  </select>
                  <div *ngIf="emergencyForm.get('insuranceCategoryId')?.invalid && emergencyForm.get('insuranceCategoryId')?.touched" class="text-danger">
                    ูุฆุฉ ุงูุชุฃููู ูุทููุจุฉ
                  </div>
                </div>
                <div class="col-lg-4">
                    <label for="insuranceNumber" class="form-label">ุฑูู ุงูุชุฃููู</label>
                    <input type="text" id="insuranceNumber" class="form-control shadow-none" formControlName="insuranceNumber" placeholder="ุฃุฏุฎู ุฑูู ุงูุชุฃููู" pattern="[0-9]*">
                </div>

                <div class="col-lg-4 mt-3">
                    <label class="form-label">ุชู ุชุญููููุ</label>
                    <div class="form-check">
                        <input type="radio" id="referredYes" class="form-check-input shadow-none" formControlName="referred" value="yes">
                        <label for="referredYes" class="form-check-label">ูุนู</label>
                    </div>
                    <div class="form-check">
                        <input type="radio" id="referredNo" class="form-check-input shadow-none" formControlName="referred" value="no">
                        <label for="referredNo" class="form-check-label">ูุง</label>
                    </div>
                </div>
                <div class="col-lg-4 mt-3" *ngIf="emergencyForm.get('referred')?.value === 'yes'">
                    <label for="referredClinic" class="form-label">ุงูุนูุงุฏุฉ ุงููุญูู ูููุง</label>
                    <select [disabled]="!emergencyForm.get('referred')?.value" id="referredClinic" class="form-select shadow-none" formControlName="referredClinic">
            <option selected disabled value="">ุงุฎุชุฑ ุงูุนูุงุฏุฉ</option>
            <option value="ุนูุงุฏุฉ ุงูุนุธุงู">ุนูุงุฏุฉ ุงูุนุธุงู</option>
            <option value="ุนูุงุฏุฉ ุงูุจุงุทูุฉ">ุนูุงุฏุฉ ุงูุจุงุทูุฉ</option>
          </select>
                </div>
                <!-- <div class="col-lg-4 mt-3">
          <label class="form-label">ุญุงุตู ุนูู ุชุทุนููุ</label>
          <div class="form-check">
            <input type="radio" id="vaccinatedYes" class="form-check-input shadow-none" formControlName="vaccinated" value="yes">
            <label for="vaccinatedYes" class="form-check-label">ูุนู</label>
          </div>
          <div class="form-check">
            <input type="radio" id="vaccinatedNo" class="form-check-input shadow-none" formControlName="vaccinated" value="no">
            <label for="vaccinatedNo" class="form-check-label">ูุง</label>
          </div>
        </div> -->
                <div class="col-lg-4 mt-3">
                    <label for="paymentMethod" class="form-label">ูุณููุฉ ุงูุฏูุน</label>
                    <select id="paymentMethod" class="form-select shadow-none" formControlName="paymentMethod">
                    <option selected disabled value="">ุงุฎุชุฑ ูุณููุฉ ุงูุฏูุน</option>
                    <option value="ููุฏู">ููุฏู</option>
                    <option value="ุชุญููู ูุญุธู">ุชุญููู ูุญุธู</option>
          </select>
                </div>
            </div>
            <div class="row justify-content-center gap-2">
                <button [disabled]="emergencyForm.invalid" class="btn-blue col-2" type="submit">ุญูุธ ุงูุจูุงูุงุช</button>
                <button type="reset" class="btn-outline-blue col-2">ุฅูุบุงุก</button>
            </div>
        </form>
    </div>
</main>