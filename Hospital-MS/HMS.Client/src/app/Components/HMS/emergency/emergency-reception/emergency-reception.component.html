<main id="emergency-reception" @fadeIn>
    <div class="container-fluid">
        <app-breadcrumb [TitleList]="TitleList"></app-breadcrumb>
        <form [formGroup]="emergencyForm" class="form p-2" (ngSubmit)="submitForm()">
            <p-toast position="top-left"></p-toast>
            <h4>🏥بيانات الاستقبال</h4>
            <div class="row">
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="name" class="form-label">إسم المريض</label>
                        <input id="name" formControlName="patientName" placeholder="أدخل إسم المريض" class="form-control shadow-none" />
                        <div *ngIf="emergencyForm.get('patientName')?.invalid && emergencyForm.get('patientName')?.touched" class="text-danger">
                            اسم المريض مطلوب
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="patientPhone" class="form-label">رقم هاتف المريض</label>
                        <input id="patientPhone" formControlName="patientPhone" placeholder="أدخل رقم هاتف المريض" class="form-control shadow-none" />
                        <div *ngIf="emergencyForm.get('patientPhone')?.invalid && emergencyForm.get('patientPhone')?.touched" class="text-danger">
                            <ng-container *ngIf="emergencyForm.get('patientPhone')?.errors?.['required']">رقم الهاتف مطلوب</ng-container>
                            <ng-container *ngIf="emergencyForm.get('patientPhone')?.errors?.['pattern']">رقم الهاتف غير صحيح</ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <div class="mt-3">
                        <label for="triageLevel" class="form-label">درجة الخطورة</label>
                        <select id="triageLevel" formControlName="emergencyLevel" class="form-select shadow-none triage-select">
                <option value="" disabled selected>اختر درجة الخطورة</option>
                <option value="حرجة">حرجة</option>
                <option value="متوسطة">متوسطة</option>
                <option value="خفيفة">خفيفة</option>
              </select>
                        <div *ngIf="emergencyForm.get('emergencyLevel')?.invalid && emergencyForm.get('emergencyLevel')?.touched" class="text-danger">
                            درجة الخطورة مطلوبة
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-lg-4 mb-3">
                    <label for="companion-name" class="form-label">إسم المرافق</label>
                    <input id="companion-name" formControlName="companionName" placeholder="أدخل إسم المرافق" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionName')?.invalid && emergencyForm.get('companionName')?.touched" class="text-danger">
                        اسم المرافق مطلوب
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label for="companion-id" class="form-label">الرقم القومي للمرافق</label>
                    <input id="companion-id" formControlName="companionNationalId" placeholder="أدخل الرقم القومي للمرافق" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionNationalId')?.invalid && emergencyForm.get('companionNationalId')?.touched" class="text-danger">
                        <ng-container *ngIf="emergencyForm.get('companionNationalId')?.errors?.['required']">الرقم القومي للمرافق مطلوب</ng-container>
                        <ng-container *ngIf="emergencyForm.get('companionNationalId')?.errors?.['pattern']">الرقم القومي يجب أن يكون 14 رقمًا</ng-container>
                    </div>
                </div>
                <div class="col-lg-4 mb-3">
                    <label for="companion-phone" class="form-label">رقم هاتف المرافق</label>
                    <input id="companion-phone" formControlName="companionPhone" placeholder="أدخل رقم هاتف المرافق" class="form-control shadow-none" />
                    <div *ngIf="emergencyForm.get('companionPhone')?.invalid && emergencyForm.get('companionPhone')?.touched" class="text-danger">
                        <ng-container *ngIf="emergencyForm.get('companionPhone')?.errors?.['required']">رقم الهاتف مطلوب</ng-container>
                        <ng-container *ngIf="emergencyForm.get('companionPhone')?.errors?.['pattern']">رقم الهاتف غير صحيح</ng-container>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <label class="form-label">ملاحظات</label>
                <textarea formControlName="notes" rows="3" class="form-control shadow-none"></textarea>
            </div>
            <div class="row justify-content-center gap-2">
                <button [disabled]="emergencyForm.invalid" class="btn-blue col-2" type="submit">حفظ البيانات</button>
                <button type="reset" class="btn-outline-blue col-2">إلغاء</button>
            </div>
        </form>
    </div>
</main>