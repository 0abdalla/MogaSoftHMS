<main id="doctors-form">
    <div class="container-fluid">
        <form [formGroup]="doctorForm" class="form p-2" (ngSubmit)="onSubmit()">
            <p-toast position="top-left"></p-toast>
            <h4 class="mb-3">๐งโโ๏ธุจูุงูุงุช ุงูุทุจูุจ</h4>
            <div class="row mb-3">
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุงุณู ุจุงููุงูู</label>
                <input type="text" class="form-control shadow-none" formControlName="FullName" placeholder="ุฃุฏุฎู ุงูุงุณู ุงููุงูู">
                <div *ngIf="doctorForm.get('FullName')?.hasError('required') && doctorForm.get('FullName')?.touched" class="text-danger">
                  ุงูุงุณู ูุทููุจ
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุฑูู ุงููููู</label>
                <input type="text" class="form-control shadow-none" formControlName="NationalId" placeholder="ุฃุฏุฎู ุงูุฑูู ุงููููู">
                <div *ngIf="doctorForm.get('NationalId')?.hasError('required') && doctorForm.get('NationalId')?.touched" class="text-danger">
                  ุงูุฑูู ุงููููู ูุทููุจ
                </div>
                <div *ngIf="doctorForm.get('NationalId')?.hasError('pattern') && doctorForm.get('NationalId')?.touched" class="text-danger">
                  ุงูุฑูู ุงููููู ูุฌุจ ุงู ูุญุชูู ุนูู 14 ุฑูู
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                <input type="date" class="form-control shadow-none" formControlName="DateOfBirth" placeholder="ุงุฎุชุฑ ุชุงุฑูุฎ ุงููููุงุฏ">
                <div *ngIf="doctorForm.get('DateOfBirth')?.hasError('required') && doctorForm.get('DateOfBirth')?.touched" class="text-danger">
                  ุชุงุฑูุฎ ุงููููุงุฏ ูุทููุจ
                </div>
                <div *ngIf="doctorForm.get('DateOfBirth')?.hasError('minDate') && doctorForm.get('DateOfBirth')?.touched" class="text-danger">
                  ุชุงุฑูุฎ ุงููููุงุฏ ูุฌุจ ุฃูุง ูููู ูุจู ุนุงู 1920
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูููุน</label>
                <select class="form-select shadow-none" formControlName="Gender">
                  <option selected disabled value="">ุงุฎุชุฑ ุงูููุน</option>
                  <option value="Male">ุฐูุฑ</option>
                  <option value="Female">ุฃูุซู</option>
                </select>
                <div *ngIf="doctorForm.get('Gender')?.invalid && doctorForm.get('Gender')?.touched" class="text-danger">
                  ุงูููุน ูุทููุจ
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ</label>
                <select class="form-select shadow-none" formControlName="MaritalStatus">
                  <option selected disabled value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
                  <option value="Single">ุฃุนุฒุจ</option>
                  <option value="Married">ูุชุฒูุฌ</option>
                  <option value="Divorced">ูุทูู</option>
                  <option value="Widowed">ุฃุฑูู</option>
                </select>
                <div *ngIf="doctorForm.get('MaritalStatus')?.invalid && doctorForm.get('MaritalStatus')?.touched" class="text-danger">
                  ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ ูุทููุจุฉ
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ</label>
                <input type="file" class="form-control shadow-none" accept="image/*" (change)="onFileChange($event)">
                <div *ngIf="photoError" class="text-danger">ุงูุตูุฑุฉ ูุทููุจุฉ</div>
              </div>
            </div>
          
            <h4 class="mb-3">๐ุทุฑู ุงูุฅุชุตุงู</h4>
            <div class="row mb-3">
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุฑูู ุงููุงุชู</label>
                <input type="text" class="form-control shadow-none" formControlName="Phone" placeholder="ุฃุฏุฎู ุฑูู ุงููุงุชู">
                <div *ngIf="doctorForm.get('Phone')?.hasError('required') && doctorForm.get('Phone')?.touched" class="text-danger">
                  ุฑูู ุงููุงุชู ูุทููุจ
                </div>
                <div *ngIf="doctorForm.get('Phone')?.hasError('pattern') && doctorForm.get('Phone')?.touched" class="text-danger">
                  ุฑูู ุงููุงุชู ูุฌุจ ุงู ูุญุชูู ุนูู 11 ุฑูู
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                <input type="email" class="form-control shadow-none" formControlName="Email" placeholder="ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
                <div *ngIf="doctorForm.get('Email')?.hasError('required') && doctorForm.get('Email')?.touched" class="text-danger">
                  ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจ
                </div>
                <div *ngIf="doctorForm.get('Email')?.hasError('email') && doctorForm.get('Email')?.touched" class="text-danger">
                  ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุนููุงู</label>
                <input type="text" class="form-control shadow-none" formControlName="Address" placeholder="ุฃุฏุฎู ุงูุนููุงู">
                <div *ngIf="doctorForm.get('Address')?.invalid && doctorForm.get('Address')?.touched" class="text-danger">
                  ุงูุนููุงู ูุทููุจ
                </div>
              </div>
            </div>
          
            <h4 class="mb-3">๐ผุจูุงูุงุช ุงูุนูู</h4>
            <div class="row mb-3">
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุชุฎุตุต ุงูุทุจู</label>
                <select class="form-select shadow-none" formControlName="MedicalServiceId">
                  <option selected disabled value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
                  <option *ngFor="let service of services" [ngValue]="service.serviceId">{{ service.serviceName }}</option>
                </select>
                <div *ngIf="doctorForm.get('MedicalServiceId')?.invalid && doctorForm.get('MedicalServiceId')?.touched" class="text-danger">
                  ุงูุชุฎุตุต ุงูุทุจู ูุทููุจ
                </div>
              </div>
              
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุงูุฏุฑุฌุฉ ุงูุนูููุฉ</label>
                <select class="form-select shadow-none" formControlName="Degree">
                  <option selected disabled value="">ุงุฎุชุฑ ุงูุฏุฑุฌุฉ ุงูุนูููุฉ</option>
                  <option value="PhD">ุฏูุชูุฑุงุฉ</option>
                  <option value="Consultant">ุงุณุชุดุงุฑู</option>
                  <option value="Specialist">ุฃุฎุตุงุฆู</option>
                  <option value="Fellowship">ุฒูุงูุฉ</option>
                  <option value="Master">ูุงุฌุณุชูุฑ</option>
                  <option value="Bachelor">ุจูุงููุฑููุณ</option>
                </select>
                <div *ngIf="doctorForm.get('Degree')?.invalid && doctorForm.get('Degree')?.touched" class="text-danger">
                  ุงูุฏุฑุฌุฉ ุงูุนูููุฉ ูุทููุจุฉ
                </div>
              </div>
              <div class="col-lg-4 mt-1">
                <label class="form-label">ุชุงุฑูุฎ ุงูุชุนููู</label>
                <input type="date" class="form-control shadow-none" formControlName="StartDate" placeholder="ุชุงุฑูุฎ ุงูุชุนููู">
                <div *ngIf="doctorForm.get('StartDate')?.invalid && doctorForm.get('StartDate')?.touched" class="text-danger">
                  ุชุงุฑูุฎ ุงูุชุนููู ูุทููุจ
                </div>
              </div>
            </div>
          
            <h4 class="mb-3">๐ ุฌุฏูู ุงูุญุถูุฑ</h4>
            <div class="mb-3" formArrayName="DoctorSchedules">
              <div *ngFor="let schedule of schedules.controls; let i = index" [formGroupName]="i" class="row mb-2 align-items-end">
                <div class="col-lg-3">
                  <label class="form-label">ุงูููู</label>
                  <select class="form-select shadow-none" formControlName="weekDay">
                    <option value="" disabled>ุงุฎุชุฑ ุงูููู</option>
                    <option *ngFor="let day of days" [value]="day.value">{{ day.label }}</option>
                  </select>
                  <div *ngIf="schedule.get('weekDay')?.invalid && schedule.get('weekDay')?.touched" class="text-danger">
                    ุงูููู ูุทููุจ
                  </div>
                </div>
                <div class="col-lg-2">
                  <label class="form-label">ูู ุงูุณุงุนุฉ</label>
                  <input type="time" class="form-control shadow-none" formControlName="startTime" placeholder="ุงุฎุชุฑ ููุช ุงูุจุฏุก" />
                  <div *ngIf="schedule.get('startTime')?.invalid && schedule.get('startTime')?.touched" class="text-danger">
                    ููุช ุงูุจุฏุก ูุทููุจ
                  </div>
                </div>
                <div class="col-lg-2">
                  <label class="form-label">ุฅูู ุงูุณุงุนุฉ</label>
                  <input type="time" class="form-control shadow-none" formControlName="endTime" placeholder="ุงุฎุชุฑ ููุช ุงูุงูุชูุงุก" />
                  <div *ngIf="schedule.get('endTime')?.invalid && schedule.get('endTime')?.touched" class="text-danger">
                    ููุช ุงูุงูุชูุงุก ูุทููุจ
                  </div>
                </div>
                <div class="col-lg-3">
                  <label class="form-label">ุนุฏุฏ ุงูุญุถูุฑ</label>
                  <input type="number" class="form-control shadow-none" min="1" max="60" formControlName="capacity" placeholder="ุฃุฏุฎู ุนุฏุฏ ุงูุญุถูุฑ" />
                  <div *ngIf="schedule.get('capacity')?.invalid && schedule.get('capacity')?.touched" class="text-danger">
                    <ng-container *ngIf="schedule.get('capacity')?.errors?.['required']">ุนุฏุฏ ุงูุญุถูุฑ ูุทููุจ</ng-container>
                    <ng-container *ngIf="schedule.get('capacity')?.errors?.['min']">ุนุฏุฏ ุงูุญุถูุฑ ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู 1</ng-container>
                    <ng-container *ngIf="schedule.get('capacity')?.errors?.['max']">ุนุฏุฏ ุงูุญุถูุฑ ูุฌุจ ุฃู ูููู ุฃูู ูู 60</ng-container>
                  </div>
                </div>
                
                <div class="col-lg-2">
                  <button type="button" class="btn-blue" (click)="addSchedule()">ุฃุถู ูุนุงุฏ</button>
                  <button type="button" class="btn-red mx-1" (click)="removeSchedule(i)">ุญุฐู</button>
                </div>
                <div *ngIf="schedule.hasError('invalidTimeRange')" class="text-danger col-12">
                  ููุช ุงูุงูุชูุงุก ูุฌุจ ุฃู ูููู ุจุนุฏ ููุช ุงูุจุฏุก
                </div>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="form-label">ููุงุญุธุงุช</label>
              <textarea class="form-control shadow-none" formControlName="Notes" placeholder="ุฃุฏุฎู ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ"></textarea>
            </div>
          
            <div class="row justify-content-center gap-2 px-3">
              <button type="submit" [disabled]="!doctorForm.valid" class="btn-blue col-2">ุญูุธ ุงูุจูุงูุงุช</button>
              <button type="reset" class="btn-outline-blue col-2">ุฅูุบุงุก</button>
            </div>
        </form>
    </div>
</main>